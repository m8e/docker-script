
IMAGE=portainer/portainer
PROJECT=$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd | rev | cut -d/ -f 1 | rev)
RESTART=on-failure:5

source .env

docker stop $PROJECT
docker rm $PROJECT
docker pull $IMAGE

docker run -d \
  -e VIRTUAL_HOST=$VHOST \
  --memory $MEM \
  --name $PROJECT \
  --net=$NETWORK \
  --restart $RESTART \
  --security-opt no-new-privileges \
  -v $PROJECT:/data \
  $IMAGE

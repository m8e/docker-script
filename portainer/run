
IMAGE=portainer/portainer
CONTAINER=$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd | rev | cut -d/ -f 1 | rev)
RESTART=on-failure:5

source .env

docker stop $CONTAINER
docker rm $CONTAINER
docker pull $IMAGE

docker run -d \
  -e VIRTUAL_HOST=$VHOST \
  --memory $MEM \
  --name $CONTAINER \
  --net=$NETWORK \
  --restart $RESTART \
  --security-opt no-new-privileges \
  -v $CONTAINER:/data \
  $IMAGE

## VARIABLES
PORT=

### mayVARIABLES
MEM=2048M # will use a maximum 2048mb of MEMORY

#### unVARIABLES
PROJECT=$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd | rev | cut -d/ -f 1 | rev)
IMAGE=jodumont/xpra

## PORT NOT DEFINED ? == EXPOSE A RAMDOM PORT
if [[ -z $PORT ]]; then
  PORT=-P
else
  PORT=-p $PORT:10000/tcp
fi

## REMOVE OLD PROJECT
docker stop $PROJECT
docker rm $PROJECT

### PULL LAST VERSION
docker pull $IMAGE

# RUN FOREST RUN
docker run -d \
--memory $MEM \
--name $PROJECT \
$PORT \
--security-opt no-new-privileges \
$IMAGE
